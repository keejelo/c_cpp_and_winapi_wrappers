//---------------------------------------------------------------------------------------------
// ** DebugConsole.cpp
//---------------------------------------------------------------------------------------------

//---------------------------------------------------------------------------------------------
// ** Include files
//---------------------------------------------------------------------------------------------
#include <windows.h>
#include "DebugConsole.h"


//---------------------------------------------------------------------------------------------
// ** HOW-TO: DEBUG Console (on/off)
//---------------------------------------------------------------------------------------------
//    Place below line in other files to control it from there, if so then comment it out here.
//    Or use it from here, whatever you like.
//---------------------------------------------------------------------------------------------

// const bool DBGCON = 1;



//---------------------------------------------------------------------------------------------
// ** DEBUG log - output text to console when: DBGCON = true (bool true)
//---------------------------------------------------------------------------------------------
int log(const char* format, ...)
{
    if (DBGCON)
    {
        return printf(format);
    }
    return 0;
};
//---------------------------------------------------------------------------------------------
// ** END: DEBUG log
//---------------------------------------------------------------------------------------------


//---------------------------------------------------------------------------------------------
// ** Add Console to application
//---------------------------------------------------------------------------------------------
bool EnableConsole()
{
    if (DBGCON)
    {
        if (!AllocConsole())
        {
            MessageBox(NULL, "Console window failed to open!", "Error", MB_ICONEXCLAMATION | MB_OK);
            return false;
        }
        else
        {
            FILE *fp = NULL;
            freopen_s(&fp, "CONOUT$", "w", stdout);
        }
        
        return true;
    }

    return false;
};
//---------------------------------------------------------------------------------------------
// ** END: Add Console to application
//---------------------------------------------------------------------------------------------

