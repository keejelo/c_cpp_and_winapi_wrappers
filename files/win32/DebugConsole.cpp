//---------------------------------------------------------------------------------------------
// ** DebugConsole.cpp
//---------------------------------------------------------------------------------------------

//---------------------------------------------------------------------------------------------
// ** INCLUDE FILES
//---------------------------------------------------------------------------------------------
#include <windows.h>
#include "DebugConsole.h"


//---------------------------------------------------------------------------------------------
// ** VARIABLES
//---------------------------------------------------------------------------------------------

//---------------------------------------------------------------------------------------------
// ** HOW-TO: DEBUG Console (on/off)
//    This enables or disables debug console
//---------------------------------------------------------------------------------------------
//    Place below line in another file to control it from there instead
//---------------------------------------------------------------------------------------------
const bool DBGCON = true;  // comment out this line if putting it in other file


//---------------------------------------------------------------------------------------------
// ** FUNCTIONS
//---------------------------------------------------------------------------------------------

//---------------------------------------------------------------------------------------------
// ** DEBUG log - output text to console when: DBGCON = true (bool true)
//    Usage, use it like printf: dlog("hello %s", str);
//---------------------------------------------------------------------------------------------
int dlog(const char *format, ...)
{
    if (DBGCON)
    {
        return printf(format);
    }
    return 0;
};
//---------------------------------------------------------------------------------------------
// ** END: DEBUG log
//---------------------------------------------------------------------------------------------


//---------------------------------------------------------------------------------------------
// ** Add Console to application
//---------------------------------------------------------------------------------------------
bool EnableConsole()
{
    if (DBGCON)
    {
        if (!AllocConsole())
        {
            MessageBox(NULL, "Console window failed to open!", "Error", MB_ICONEXCLAMATION | MB_OK);
            return false;
        }
        else
        {
            FILE *fp = NULL;
            freopen_s(&fp, "CONOUT$", "w", stdout);
        }        
        return true;
    }
    return false;
};
//---------------------------------------------------------------------------------------------
// ** END: Add Console to application
//---------------------------------------------------------------------------------------------

